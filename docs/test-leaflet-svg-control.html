<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Leaflet SVG Control</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    #map { height: 100vh; }
    .svg-control {
      width: 160px;              /* fixed size */
      height: 160px;
      padding: 6px;
      background: rgba(255,255,255,0.8);
      border-radius: 8px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.3);
    }
    .svg-control svg { width: 100%; height: 100%; display: block; }
  </style>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  // Basic map
  const map = L.map('map').setView([40.7, -74.0], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: 'Â© OSM'
  }).addTo(map);

  // Your SVG markup (any SVG works)
  const mySVG = `
    <svg viewBox="0 0 100 100" aria-label="logo">
      <defs>
        <radialGradient id="g"><stop offset="0" /><stop offset="1" stop-opacity="0"/></radialGradient>
      </defs>
      <circle cx="50" cy="50" r="46" fill="none" stroke="black" stroke-width="4"/>
      <circle cx="50" cy="50" r="20" fill="url(#g)"/>
      <path d="M20 80 L80 20" stroke="black" stroke-width="6" stroke-linecap="round"/>
    </svg>
  `;

  // Custom control that hosts the SVG
  const SvgControl = L.Control.extend({
    onAdd: function () {
      const div = L.DomUtil.create('div', "fade-in-out-class");
      div.style.width = '460px';
      div.style.transition = 'opacity 0.25s ease-in-out';
      div.innerHTML = mySVG;
      return div;
    }
  });

  // Add it
  const svgControl = new SvgControl({ position: 'topleft' }).addTo(map);

  // Position it at center of viewport
  const container = svgControl.getContainer();
  
  // First, get the parent control container and make it full-width/height
  const parentContainer = container.parentNode;
  parentContainer.style.width = '100vw';
  parentContainer.style.height = '100vh';
  parentContainer.style.left = '0';
  parentContainer.style.top = '0';
  
  // Now position our div in the center
  container.style.position = 'absolute';
  container.style.left = '50%';
  container.style.top = '50%';
  container.style.transform = 'translate(-50%, -50%)';  // Actually center it
  container.style.right = 'auto';
  container.style.bottom = 'auto';

  map.on("zoomend", function() {

    // This is nessisary becuase the svgcontrol is a leaflet thing, not the actual element. 
    container.style.opacity = container.style.opacity == 0 ? 1 : 0;
    
    // const svg = document.querySelector('.svg-control svg');
    // if (svg) {
    //     svg.style.opacity = 0;
    //     svg.style.transition = 'opacity 0.25s ease-in-out';
    // }
    
  });


  // Optional: update the SVG later
  function setSVG(markup) {
    const el = document.querySelector('.svg-control');
    if (el) el.innerHTML = markup;
  }
  // Example: setSVG('<svg ...>...</svg>');
</script>
</body>
</html>
